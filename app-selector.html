<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Escolher Aplicativo</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <link rel="manifest" href="./manifest.json" />
  <link rel="icon" href="./common/img/favicon.ico" />
  <style>
    :root { --roxo:#6a1b9a; }
    * { box-sizing: border-box; }
    body { margin:0; font-family:Arial, Helvetica, sans-serif; background:#f6f3fa; }
    .conteudo{ padding:24px; max-width:680px; margin:0 auto; }
    .grid{ display:grid; gap:16px; }
    .btn{
      display:flex; align-items:center; gap:12px;
      padding:16px; background:#fff; border-radius:14px;
      border:1px solid #e6e0ef; text-decoration:none; color:#2a2540; font-weight:700;
    }
    .btn i{ color:var(--roxo); font-size:20px }
  </style>
  <script type="module">
    import { inicializarPagina } from "./common/js/navegacao.js";
    import { getCurrentUser, canAccess } from "./common/js/auth.js";

    document.addEventListener("DOMContentLoaded", async () => {
      await inicializarPagina("Escolher Aplicativo");

      const u = getCurrentUser();
      if (!u) {
        window.location.replace("./login.html?next="+encodeURIComponent("./app-selector.html"));
        return;
      }

      document.querySelectorAll("[data-app]").forEach(card => {
        const app = card.getAttribute("data-app");
        if (!canAccess(app)) card.style.display = "none";
      });
    });
  </script>
</head>
<body>
  <main class="conteudo">
    <div class="grid">
      <a class="btn" data-app="operacao" href="./app-operacao/html/menu.html"><i class="fa-solid fa-list"></i>App - Operação</a>
      <a class="btn" data-app="erp" href="./app-erp/html/menu.html"><i class="fa-solid fa-boxes-stacked"></i>App - ERP</a>
    </div>
  </main>
</body>
</html>
